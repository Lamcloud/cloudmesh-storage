

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. AWSS3 Cloudmesh Integration &mdash; Cloudmesh v4 alpha documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Cloudmesh Multi Cloud Open API Interface" href="README-storage-openapi.html" />
    <link rel="prev" title="3. Cloudmesh Multi Cloud Storage Interface" href="README-storage.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Cloudmesh v4
          

          
          </a>

          
            
            
              <div class="version">
                4.0.28
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">2. Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="README-storage.html">3. Cloudmesh Multi Cloud Storage Interface</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. AWSS3 Cloudmesh Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#storage-functions-overview">4.1. Storage functions overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-dir">4.2. Create dir</a></li>
<li class="toctree-l2"><a class="reference internal" href="#put">4.3. Put</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get">4.4. Get</a></li>
<li class="toctree-l2"><a class="reference internal" href="#search">4.5. Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="#list">4.6. List</a></li>
<li class="toctree-l2"><a class="reference internal" href="#delete">4.7. Delete</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="README-storage-openapi.html">5. Cloudmesh Multi Cloud Open API Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="code.html">6. Code Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cloudmesh v4</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>4. AWSS3 Cloudmesh Integration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/README-storage-awss3.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="awss3-cloudmesh-integration">
<h1>4. AWSS3 Cloudmesh Integration<a class="headerlink" href="#awss3-cloudmesh-integration" title="Permalink to this headline">¶</a></h1>
<p>AWS S3 file storage has been integrated with cloudmesh library and is available
for use via commandline. As a first step we need to modify <code class="docutils literal notranslate"><span class="pre">cloudmesh4.yaml</span></code>
config file.  Under ‘storage’ section, we need to add the aws section to specify
the parameters used to store files in AWS S3.</p>
<p>In the credentials section under aws, specify the access key id and secret
access key which will be available in the AWS console under
<code class="docutils literal notranslate"><span class="pre">AWS</span> <span class="pre">IAM</span> <span class="pre">service</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Users</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Security</span> <span class="pre">Credentials</span></code>.</p>
<p>Container is the default bucket which will be used to store the files in AWS S3.
Region is the geographic area like <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code> which contains the bucket. Region
is required to get a connection handle on the S3 Client or resource for
that geographic area.</p>
<p>Here is a sample.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cloudmesh:
  ...
  storage:
    aws:
      cm:
        heading: aws
        host: amazon.aws.com
        label: aws
        kind: awsS3
        version: TBD
      default:
        directory: TBD
      credentials:
        access_key_id: *********
        secret_access_key: *******
        container: name of bucket that you want user to be contained in.
        region: Specfiy the default region eg us-east-1
</pre></div>
</div>
<p>The Cloudmesh command line library offers six functions under storage command:
get, put, search, list, create directory, and delete.
Once you have installed Cloudmesh, type <code class="docutils literal notranslate"><span class="pre">cms</span></code> into the command line to start the
cms shell.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms
+-------------------------------------------------------+
<span class="p">|</span>   ____ _                 _                     _      <span class="p">|</span>
<span class="p">|</span>  / ___<span class="p">|</span> <span class="p">|</span> ___  _   _  __<span class="p">|</span> <span class="p">|</span>_ __ ___   ___  ___<span class="p">|</span> <span class="p">|</span>__   <span class="p">|</span>
<span class="p">|</span> <span class="p">|</span> <span class="p">|</span>   <span class="p">|</span> <span class="p">|</span>/ _ <span class="se">\|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span>/ _<span class="sb">`</span> <span class="p">|</span> <span class="s1">&#39;_ ` _ \ / _ \/ __| &#39;</span>_ <span class="se">\ </span> <span class="p">|</span>
<span class="p">|</span> <span class="p">|</span> <span class="p">|</span>___<span class="p">|</span> <span class="p">|</span> <span class="o">(</span>_<span class="o">)</span> <span class="p">|</span> <span class="p">|</span>_<span class="p">|</span> <span class="p">|</span> <span class="o">(</span>_<span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span>  __/<span class="se">\_</span>_ <span class="se">\ </span><span class="p">|</span> <span class="p">|</span> <span class="p">|</span> <span class="p">|</span>
<span class="p">|</span>  <span class="se">\_</span>___<span class="p">|</span>_<span class="p">|</span><span class="se">\_</span>__/ <span class="se">\_</span>_,_<span class="p">|</span><span class="se">\_</span>_,_<span class="p">|</span>_<span class="p">|</span> <span class="p">|</span>_<span class="p">|</span> <span class="p">|</span>_<span class="p">|</span><span class="se">\_</span>__<span class="o">||</span>___/_<span class="p">|</span> <span class="p">|</span>_<span class="p">|</span> <span class="p">|</span>
+-------------------------------------------------------+
<span class="p">|</span>                  Cloudmesh CMD5 Shell                 <span class="p">|</span>
+-------------------------------------------------------+

cms&gt;
</pre></div>
</div>
<p>To view the docopt for storage command, type in</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cms&gt; <span class="nb">help</span> storage 
</pre></div>
</div>
<p>Help command gives a detail level understanding of what each command does and
how to use the command line to interact with different storage providers and
different parameters / options available in a particular command.
For eg to invoke AWS S3 service, we need to pass awss3 as parameter to storage
and suffix with the function call with the function parameters.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cms&gt; storage --storage<span class="o">=</span><span class="s1">&#39;aws&#39;</span> list <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<p>Alternatively, storage command can also be called directly without starting the
cms shell.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms storage --storage<span class="o">=</span><span class="s1">&#39;aws&#39;</span> list <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<div class="section" id="storage-functions-overview">
<h2>4.1. Storage functions overview<a class="headerlink" href="#storage-functions-overview" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="create-dir">
<h2>4.2. Create dir<a class="headerlink" href="#create-dir" title="Permalink to this headline">¶</a></h2>
<p>This command helps to create a new directory on AWS S3. You must specify the
full path of the new directory you would like to create.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms storage --storage<span class="o">=</span><span class="s1">&#39;aws&#39;</span> create dir /base_path/targetdir
</pre></div>
</div>
</div>
<div class="section" id="put">
<h2>4.3. Put<a class="headerlink" href="#put" title="Permalink to this headline">¶</a></h2>
<p>The put command uploads files from your local host to the S3.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms storage --storage<span class="o">=</span><span class="s1">&#39;aws&#39;</span> put ~/.cloudmesh/storage/sourcedir /base_path/targetdir --recursive
</pre></div>
</div>
<p>Source for this command could be either a file or directory.</p>
<p>If you specify a file as the source, the file will be uploaded if no such file
exists on the cloud or updated if a copy already exists on the cloud.</p>
<p>If the source is a directory, you can choose to specify the recursive option to
upload the files in the sub-directories in the source as well to the target
directory in S3.
If the recursive option is not specified, only the files in the source
directory will be uploaded to the target directory and the sub-directories will
be ignored.</p>
</div>
<div class="section" id="get">
<h2>4.4. Get<a class="headerlink" href="#get" title="Permalink to this headline">¶</a></h2>
<p>The get command downloads files from S3 to your local host.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms storage --storage<span class="o">=</span><span class="s1">&#39;aws&#39;</span> get /base_container/sourcedir ~/.cloudmesh/storage/targetdir --recursive
</pre></div>
</div>
<p>Source for this command could be either a file or directory.</p>
<p>If you specify a file as the source, you need to speccify the full path of file
including the file name where you want the file to be downloaded. In case you
do not specify the file name and only give the target directory, then the file
will be downloaded with the same name as present on S3.</p>
<p>If the source is a directory, you can choose to specify the recursive option to
download files in the sub-directories in the source as well to the target
directory in your local host.
If the recursive option is not specified, only the files in the source
directory will be downloaded to the target directory and the sub-directories
will be ignored.</p>
</div>
<div class="section" id="search">
<h2>4.5. Search<a class="headerlink" href="#search" title="Permalink to this headline">¶</a></h2>
<p>The search command helps to search for a particular file within a directory.</p>
<p>If recursive options is specified, Cloudmesh will search for the file in all
sub-directories of the original directory as well.</p>
<p>To search for a file at the root, pass an empty string or / as the target dir.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms storage --storage<span class="o">=</span><span class="s1">&#39;aws&#39;</span> search /base_path/targetdir testfile.txt --recursive
</pre></div>
</div>
</div>
<div class="section" id="list">
<h2>4.6. List<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h2>
<p>The list command lists all the contents of a cloud directory. If the recursive
option is specified, it will list the contents of all sub-directories as well.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms storage --storage<span class="o">=</span><span class="s1">&#39;aws&#39;</span> list /base_path/targetdir --recursive
</pre></div>
</div>
</div>
<div class="section" id="delete">
<h2>4.7. Delete<a class="headerlink" href="#delete" title="Permalink to this headline">¶</a></h2>
<p>The delete command can delete files or folders from your cloud file storage.
Deleting a folder will delete its contents as well (including the
sub-directories).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cms storage --storage<span class="o">=</span><span class="s1">&#39;aws&#39;</span> delete /base_path/targetdir --recursive
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="README-storage-openapi.html" class="btn btn-neutral float-right" title="5. Cloudmesh Multi Cloud Open API Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="README-storage.html" class="btn btn-neutral float-left" title="3. Cloudmesh Multi Cloud Storage Interface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Cloudmesh Community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>